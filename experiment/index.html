<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Frontend k·∫øt n·ªëi Backend</title>
</head>
<body>
    <h1>·ª®ng d·ª•ng Ch√†o m·ª´ng ƒê∆°n gi·∫£n</h1>
    <input type="text" id="nameInput" placeholder="Nh·∫≠p t√™n c·ªßa b·∫°n">
    <button onclick="sendName()">G·ª≠i ƒë·∫øn Backend</button>
    
    <p><strong>Ph·∫£n h·ªìi t·ª´ Backend:</strong></p>
    <div id="responseMessage" style="border: 1px solid #ccc; padding: 10px; min-height: 20px;">
        Ch∆∞a c√≥ ph·∫£n h·ªìi.
    </div>

    <script>
        // H√†m n√†y ƒë∆∞·ª£c g·ªçi khi nh·∫•n n√∫t "G·ª≠i ƒë·∫øn Backend"
        async function sendName() {
            const name = document.getElementById('nameInput').value;
            const responseDiv = document.getElementById('responseMessage');
            
            if (!name) {
                responseDiv.innerHTML = "Vui l√≤ng nh·∫≠p t√™n.";
                return;
            }

            // URL c·ªßa API Flask Backend (M·∫∑c ƒë·ªãnh l√† http://127.0.0.1:5000)
            const apiUrl = 'http://127.0.0.1:5000/api/greeting';

            try {
                // G·ª≠i y√™u c·∫ßu POST ƒë·∫øn Backend s·ª≠ d·ª•ng Fetch API
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: {
                        // B√°o cho Backend bi·∫øt d·ªØ li·ªáu g·ª≠i ƒëi l√† JSON
                        'Content-Type': 'application/json'
                    },
                    // Chuy·ªÉn ƒë·ªëi t∆∞·ª£ng JavaScript th√†nh chu·ªói JSON ƒë·ªÉ g·ª≠i ƒëi
                    body: JSON.stringify({ name: name })
                });

                // Chuy·ªÉn ph·∫£n h·ªìi (Response) th√†nh ƒë·ªëi t∆∞·ª£ng JavaScript
                const data = await response.json(); 

                if (response.ok) {
                    // N·∫øu Status Code l√† 200 (Th√†nh c√¥ng)
                    responseDiv.innerHTML = `‚úÖ Th√†nh c√¥ng: ${data.greeting}`;
                } else {
                    // N·∫øu c√≥ l·ªói (v√≠ d·ª• 400, 500)
                    responseDiv.innerHTML = `‚ùå L·ªói: ${data.message || 'L·ªói kh√¥ng x√°c ƒë·ªãnh'}`;
                }

            } catch (error) {
                // X·ª≠ l√Ω l·ªói k·∫øt n·ªëi m·∫°ng ho·∫∑c server kh√¥ng ch·∫°y
                responseDiv.innerHTML = `üíî L·ªói k·∫øt n·ªëi: Server Flask c√≥ ƒëang ch·∫°y kh√¥ng? (${error.message})`;
                console.error('L·ªói khi g·ªçi API:', error);
            }
        }
    </script>
</body>
</html>